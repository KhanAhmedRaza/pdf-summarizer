{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 hero-content">
                <h1 class="hero-title">Summarize Any PDF in Seconds Using AI</h1>
                <p class="hero-subtitle">Upload your PDF and get a clean, concise summary instantly â€” powered by GPT-4o. No fluff. Just insights.</p>
                <div class="d-flex gap-3">
                    <a href="#upload-section" class="btn btn-primary">Try It Now</a>
                    <a href="#how-it-works" class="btn btn-outline-primary">How It Works</a>
                </div>
            </div>
            <div class="col-lg-6 d-none d-lg-block">
                <img src="{{ url_for('static', filename='img/hero-illustration.png') }}" alt="PDF Summarization" class="img-fluid">
            </div>
        </div>
    </div>
</section>

<!-- Upload Section -->
<section id="upload-section" class="container">
    <div class="upload-section">
        <h2 class="upload-title">Upload Your PDF</h2>
        <form action="{{ url_for('upload_pdf') }}" method="post" enctype="multipart/form-data" id="upload-form">
            <div class="upload-area" id="drop-area">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <p class="upload-text">Drag & drop your PDF here or click to browse</p>
                <p class="text-muted small">Max file size: 5MB for free tier</p>
                <input type="file" class="form-control d-none" id="pdf_file" name="pdf_file" accept=".pdf" required>
                <button type="button" class="btn btn-primary mt-3" id="browse-btn">Browse Files</button>
            </div>
            <div id="file-info" class="mt-3 d-none">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <i class="fas fa-file-pdf text-danger me-2"></i>
                        <span id="file-name">document.pdf</span>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-danger" id="remove-file">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="progress mt-2">
                    <div class="progress-bar bg-primary" role="progressbar" style="width: 0%"></div>
                </div>
            </div>
            <div id="file-size-warning" class="file-size-warning d-none">
                <h5 class="file-size-warning-title">File size exceeds free tier limit</h5>
                <p class="file-size-warning-text">Your file is larger than 5MB. Please upload a smaller file or upgrade to our premium tier.</p>
            </div>
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary" id="summarize-btn">Summarize Now</button>
            </div>
        </form>
    </div>
</section>

<!-- Features Section -->
<section class="container py-5">
    <div class="row">
        <div class="col-md-4 mb-4 mb-md-0">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3 class="feature-title">Lightning Fast</h3>
                <p class="feature-description">Get summaries in seconds, not minutes. Our AI processes even complex documents quickly and efficiently.</p>
            </div>
        </div>
        <div class="col-md-4 mb-4 mb-md-0">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3 class="feature-title">AI-Powered Insights</h3>
                <p class="feature-description">Powered by GPT-4o, our summaries capture key points and main ideas with remarkable accuracy.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3 class="feature-title">Secure & Private</h3>
                <p class="feature-description">Your documents are processed securely and never stored permanently. Your privacy is our priority.</p>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section id="how-it-works" class="how-it-works">
    <div class="container">
        <h2 class="section-title">How It Works</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h3 class="step-title">Upload Your PDF</h3>
                    <p class="step-description">Simply drag and drop your PDF document or browse to select it.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card">
                    <div class="step-number">2</div>
                    <h3 class="step-title">AI Processing</h3>
                    <p class="step-description">Our advanced AI reads and analyzes your document to identify key information.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card">
                    <div class="step-number">3</div>
                    <h3 class="step-title">Get Your Summary</h3>
                    <p class="step-description">Receive a concise, well-structured summary that captures the essence of your document.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials">
    <div class="container">
        <h2 class="section-title">What Our Users Say</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="testimonial-card">
                    <p class="testimonial-text">"Summrize has saved me countless hours of reading through research papers. The summaries are accurate and capture all the important points."</p>
                    <div class="testimonial-author">
                        <img src="{{ url_for('static', filename='img/avatar-1.jpg') }}" alt="User Avatar" class="testimonial-avatar">
                        <div>
                            <h4 class="testimonial-name">Sarah Johnson</h4>
                            <p class="testimonial-position">Research Scientist</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <p class="testimonial-text">"As a student, this tool has been invaluable for quickly understanding complex academic papers. Highly recommended!"</p>
                    <div class="testimonial-author">
                        <img src="{{ url_for('static', filename='img/avatar-2.jpg') }}" alt="User Avatar" class="testimonial-avatar">
                        <div>
                            <h4 class="testimonial-name">Michael Chen</h4>
                            <p class="testimonial-position">Graduate Student</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <p class="testimonial-text">"Our team uses Summrize daily to process legal documents. The accuracy and speed have significantly improved our workflow."</p>
                    <div class="testimonial-author">
                        <img src="{{ url_for('static', filename='img/avatar-3.jpg') }}" alt="User Avatar" class="testimonial-avatar">
                        <div>
                            <h4 class="testimonial-name">Jessica Martinez</h4>
                            <p class="testimonial-position">Legal Consultant</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Auth Modal -->
<div class="modal fade auth-modal" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="authModalLabel">Sign in to view your summary</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="text-muted">Your PDF has been processed! Sign in or create an account to view your summary.</p>
                <button class="btn btn-google w-100 mb-3">
                    <i class="fab fa-google me-2"></i> Continue with Google
                </button>
                <div class="auth-separator">
                    <span>or</span>
                </div>
                <form id="loginForm">
                    <div class="mb-3">
                        <label for="email" class="form-label">Email address</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" required>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">
                                Remember me
                            </label>
                        </div>
                        <a href="#" class="text-decoration-none">Forgot password?</a>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Sign In</button>
                </form>
                <p class="text-center mt-3">
                    Don't have an account? <a href="#" id="switchToSignup" class="text-decoration-none">Sign up</a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for the landing page -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const dropArea = document.getElementById('drop-area');
        const fileInput = document.getElementById('pdf_file');
        const browseBtn = document.getElementById('browse-btn');
        const fileInfo = document.getElementById('file-info');
        const fileName = document.getElementById('file-name');
        const removeFile = document.getElementById('remove-file');
        const fileSizeWarning = document.getElementById('file-size-warning');
        const summarizeBtn = document.getElementById('summarize-btn');
        const uploadForm = document.getElementById('upload-form');
        const progressBar = document.querySelector('.progress-bar');
        
        // Max file size for free tier (5MB)
        const MAX_FILE_SIZE = 5 * 1024 * 1024;
        
        // Handle browse button click
        browseBtn.addEventListener('click', () => {
            fileInput.click();
        });
        
        // Handle file selection
        fileInput.addEventListener('change', handleFileSelect);
        
        // Handle drag and drop
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });
        
        function highlight() {
            dropArea.classList.add('border-primary', 'bg-light');
        }
        
        function unhighlight() {
            dropArea.classList.remove('border-primary', 'bg-light');
        }
        
        dropArea.addEventListener('drop', handleDrop, false);
        
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            
            if (files.length > 0) {
                fileInput.files = files;
                handleFileSelect();
            }
        }
        
        function handleFileSelect() {
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                
                // Check if file is a PDF
                if (file.type !== 'application/pdf') {
                    alert('Please upload a PDF file.');
                    resetFileInput();
                    return;
                }
                
                // Check file size
                if (file.size > MAX_FILE_SIZE) {
                    fileSizeWarning.classList.remove('d-none');
                    summarizeBtn.disabled = true;
                } else {
                    fileSizeWarning.classList.add('d-none');
                    summarizeBtn.disabled = false;
                }
                
                // Show file info
                fileName.textContent = file.name;
                fileInfo.classList.remove('d-none');
                
                // Simulate upload progress
                simulateProgress();
            }
        }
        
        function simulateProgress() {
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                } else {
                    width += 10;
                    progressBar.style.width = width + '%';
                }
            }, 100);
        }
        
        // Handle remove file button
        removeFile.addEventListener('click', resetFileInput);
        
        function resetFileInput() {
            fileInput.value = '';
            fileInfo.classList.add('d-none');
            fileSizeWarning.classList.add('d-none');
            progressBar.style.width = '0%';
            summarizeBtn.disabled = false;
        }
        
        // Handle form submission
        uploadForm.addEventListener('submit', function(e) {
            if (!fileInput.files.length) {
                e.preventDefault();
                alert('Please select a PDF file to upload.');
                return;
            }
            
            const file = fileInput.files[0];
            
            // If file is too large, prevent submission
            if (file.size > MAX_FILE_SIZE) {
                e.preventDefault();
                fileSizeWarning.classList.remove('d-none');
                return;
            }
            
            // For demo purposes, show auth modal instead of submitting
            // In production, this would be handled by the server
            e.preventDefault();
            
            // Show auth modal after a brief delay to simulate processing
            setTimeout(() => {
                const authModal = new bootstrap.Modal(document.getElementById('authModal'));
                authModal.show();
            }, 1500);
        });
        
        // Switch between login and signup forms
        document.getElementById('switchToSignup').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('authModalLabel').textContent = 'Create an account';
            document.getElementById('loginForm').innerHTML = `
                <div class="mb-3">
                    <label for="name" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="name" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email address</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="password" required>
                </div>
                <div class="mb-3">
                    <label for="confirmPassword" class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="confirmPassword" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Sign Up</button>
            `;
            this.parentElement.innerHTML = 'Already have an account? <a href="#" id="switchToLogin" class="text-decoration-none">Sign in</a>';
            
            document.getElementById('switchToLogin').addEventListener('click', function(e) {
                e.preventDefault();
                location.reload();
            });
        });
    });
</script>
{% endblock %}
